name: Test Discord Webhook

on:
  workflow_dispatch:  # Manual trigger
  push:
    branches: [ main ]

jobs:
  test-webhook:
    runs-on: ubuntu-latest
    steps:
    - name: Test Morning Message
      run: |
        curl -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
        -H "Content-Type: application/json" \
        -d '{
          "embeds": [
            {
              "title": "ğŸ§ª TEST: Selamaaat Pagiii! â˜•âœ¨",
              "description": "**Testing webhook connection!** ğŸš€\n\nKalau pesan ini muncul di Discord, berarti setup berhasiiiil! ğŸ‰\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n**ğŸ‡¬ğŸ‡§ TEST: Good Morning!**\nIf you see this message, the webhook is working perfectly! âœ…",
              "color": 65280,
              "footer": {
                "text": "GitHub Actions Test Success!"
              },
              "timestamp": "'"$(date -u +%Y-%m-%dT%H:%M:%S.000Z)"'"
            }
          ]
        }'