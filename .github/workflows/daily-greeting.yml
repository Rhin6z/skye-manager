name: daily discord greeting - rotating (english-first)

on:
  schedule:
    # 07:00 WIB (00:00 UTC) - weekdays
    - cron: '0 0 * * 1-5'
    # 12:00 WIB (05:00 UTC)
    - cron: '0 5 * * 1-5'
    # 17:00 WIB (10:00 UTC)
    - cron: '0 10 * * 1-5'
    # 22:00 WIB (15:00 UTC)
    - cron: '0 15 * * 1-5'

  workflow_dispatch:
    inputs:
      greeting_type:
        description: 'select greeting type'
        required: true
        default: 'morning'
        type: choice
        options:
          - morning
          - afternoon
          - evening
          - night

jobs:
  send-greeting:
    runs-on: ubuntu-latest
    steps:
      - name: send morning greeting (rotating)
        if: (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'morning') || github.event.schedule == '0 0 * * 1-5'
        run: |
          TIMESTAMP=$(date -u +%Y-%m-%dT%H:%M:%S.000Z)
          
          TITLES=(
            "ðŸŒ… good morning, gng"
            "ðŸŒ… morning check-in"
            "ðŸŒ… hey, welcome in"
          )
          
          DESCS=(
            "[haloww chatt]\\n\\nlowkey warm-up: pick 1 tiny win to start.\\n\\n> lezgoo."
            "[pagiii gng]\\n\\nsip coffee, set intention.\\n\\n> small steps."
            "[yaa, morning fam]\\n\\nnew day, new reps.\\n\\n> steady."
          )
          
          FOOTERS=(
            "warm start, clean slate"
            "sip kopi, ship kode"
            "light focus, strong flow"
          )
          
          INDEX=$((RANDOM % 3))
          
          cat > payload.json << EOF
          {
            "embeds": [{
              "title": "${TITLES[$INDEX]}",
              "description": "${DESCS[$INDEX]}",
              "color": 16766720,
              "thumbnail": {
                "url": "https://cdn.discordapp.com/attachments/1365248252009644053/1407333123791786077/logo_anim.gif?ex=68a5b89b&is=68a4671b&hm=2bc283716f14281f2518ac14003d41ca9fd58200a446e21a7682d2cdb6b4f38b"
              },
              "footer": {
                "text": "${FOOTERS[$INDEX]} | by server dev <@399393175904714752>",
                "icon_url": "https://cdn.discordapp.com/emojis/692428869338931240.png"
              },
              "timestamp": "$TIMESTAMP"
            }]
          }
          EOF
          
          curl -sS -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            --data @payload.json

      - name: send afternoon greeting (rotating)
        if: (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'afternoon') || github.event.schedule == '0 5 * * 1-5'
        run: |
          TIMESTAMP=$(date -u +%Y-%m-%dT%H:%M:%S.000Z)
          
          TITLES=(
            "ðŸŒž midday boost"
            "ðŸŒž afternoon check-in"
            "ðŸŒž keep the pace"
            "ðŸŒž lunch & launch"
          )
          
          DESCS=(
            "[udah lunch? minum dulu, gng]\\n\\nlock 25-min focus, then breathe. satu progress bermakna > lima tab random.\\n\\n> keep it rolling, pelan tapi nancep."
            "[halo halo, siang dulu nih]\\n\\nwhat's your one thing before break? drop it - kita dorong bareng.\\n\\n> less noise, more signal."
            "[lanjut tipis tipis ya]\\n\\nstretch, refill water, ship a tiny update - ong.\\n\\n> progress > perfection."
            "[ayo ayo, power hour dikit]\\n\\nno doomscroll, just one clean commit - bet.\\n\\n> ship small, ship often."
          )
          
          FOOTERS=(
            "hydrate, then iterate"
            "focus beats frenzy"
            "move kind, move forward"
            "snack, stack, ship"
          )
          
          INDEX=$((RANDOM % 4))
          
          cat > payload.json << EOF
          {
            "embeds": [{
              "title": "${TITLES[$INDEX]}",
              "description": "${DESCS[$INDEX]}",
              "color": 16763904,
              "thumbnail": {
                "url": "https://cdn.discordapp.com/attachments/1365248252009644053/1407333123791786077/logo_anim.gif?ex=68a5b89b&is=68a4671b&hm=2bc283716f14281f2518ac14003d41ca9fd58200a446e21a7682d2cdb6b4f38b"
              },
              "footer": {
                "text": "${FOOTERS[$INDEX]} | by server dev <@399393175904714752>",
                "icon_url": "https://cdn.discordapp.com/emojis/692428869338931240.png"
              },
              "timestamp": "$TIMESTAMP"
            }]
          }
          EOF
          
          curl -sS -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            --data @payload.json

      - name: send evening greeting (rotating)
        if: (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'evening') || github.event.schedule == '0 10 * * 1-5'
        run: |
          TIMESTAMP=$(date -u +%Y-%m-%dT%H:%M:%S.000Z)
          
          TITLES=(
            "ðŸŒ† evening check-in"
            "ðŸŒ† golden hour hello"
            "ðŸŒ† wrap-up together"
            "ðŸŒ† sunset sync"
          )
          
          DESCS=(
            "[gimana harinya? cerita dikit yuk]\\n\\nwrap one loose end biar besok startnya ringan - done, pending, next.\\n\\n> proud of you, keep going."
            "[selow dulu, tarik napas]\\n\\nshare your best moment today - besar/kecil gapapa.\\n\\n> you did enough, fr."
            "[halo tim, finish strong bareng]\\n\\nclose one tab, jot one note for tomorrow, log off with peace.\\n\\n> you're allowed to slow down."
            "[golden hour check]\\n\\nif mager, at least tidy desk 2 menit - tiny reset, big vibe.\\n\\n> tomorrow you will thank you."
          )
          
          FOOTERS=(
            "reflect, then reset"
            "gratitude > grind"
            "light close, easy start"
            "sunset on, stress off"
          )
          
          INDEX=$((RANDOM % 4))
          
          cat > payload.json << EOF
          {
            "embeds": [{
              "title": "${TITLES[$INDEX]}",
              "description": "${DESCS[$INDEX]}",
              "color": 16744448,
              "thumbnail": {
                "url": "https://cdn.discordapp.com/attachments/1365248252009644053/1407333123791786077/logo_anim.gif?ex=68a5b89b&is=68a4671b&hm=2bc283716f14281f2518ac14003d41ca9fd58200a446e21a7682d2cdb6b4f38b"
              },
              "footer": {
                "text": "${FOOTERS[$INDEX]} | by server dev <@399393175904714752>",
                "icon_url": "https://cdn.discordapp.com/emojis/692428869338931240.png"
              },
              "timestamp": "$TIMESTAMP"
            }]
          }
          EOF
          
          curl -sS -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            --data @payload.json

      - name: send night greeting (rotating)
        if: (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'night') || github.event.schedule == '0 15 * * 1-5'
        run: |
          TIMESTAMP=$(date -u +%Y-%m-%dT%H:%M:%S.000Z)
          
          TITLES=(
            "ðŸŒ™ night wind down"
            "ðŸŒ™ good night, gng"
            "ðŸŒ™ lights low, hearts full"
            "ðŸŒ™ bedtime ping"
          )
          
          DESCS=(
            "[malam semua - good job today]\\n\\nmute 2 notifs paling berisik, breathe 4-4-4, tulis satu hal yang bikin kamu senyum.\\n\\n> rest is part of the plan, gn."
            "[yaa, waktunya cooldown]\\n\\nunplug a bit - lamp dim, mind calm. besok gas lagi, no rush no drama.\\n\\n> sleep easy, gng."
            "[thank you for today]\\n\\ndrop one tiny win di chat, lalu tutup layar. sisanya besok - no cap.\\n\\n> good night, fam."
            "[last call before gn]\\n\\nwash face, water sip, airplane mode - then off.\\n\\n> recharge mode: on."
          )
          
          FOOTERS=(
            "recharge mode: on"
            "sleep easy, wake ready"
            "see u tomorrow"
            "dream well, ship well"
          )
          
          INDEX=$((RANDOM % 4))
          
          cat > payload.json << EOF
          {
            "embeds": [{
              "title": "${TITLES[$INDEX]}",
              "description": "${DESCS[$INDEX]}",
              "color": 8947848,
              "thumbnail": {
                "url": "https://cdn.discordapp.com/attachments/1365248252009644053/1407333123791786077/logo_anim.gif?ex=68a5b89b&is=68a4671b&hm=2bc283716f14281f2518ac14003d41ca9fd58200a446e21a7682d2cdb6b4f38b"
              },
              "footer": {
                "text": "${FOOTERS[$INDEX]} | by server dev <@399393175904714752>",
                "icon_url": "https://cdn.discordapp.com/emojis/692428869338931240.png"
              },
              "timestamp": "$TIMESTAMP"
            }]
          }
          EOF
          
          curl -sS -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            --data @payload.json