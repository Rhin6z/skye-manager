name: daily discord greeting

on:
  schedule:
    - cron: '0 0 * * 1-5'
    - cron: '0 5 * * 1-5'
    - cron: '0 10 * * 1-5'
    - cron: '0 15 * * 1-5'
  workflow_dispatch:
    inputs:
      greeting_type:
        description: 'select greeting type'
        required: true
        default: 'morning'
        type: choice
        options: [morning, afternoon, evening, night]

jobs:
  send-greeting:
    runs-on: ubuntu-latest
    timeout-minutes: 2
    
    steps:
      - name: Send Discord Greeting
        run: |
          set -e
          
          # Determine greeting type
          if [[ "${{ github.event_name }}" == "workflow_dispatch" ]]; then
            TYPE="${{ github.event.inputs.greeting_type }}"
          else
            case "${{ github.event.schedule }}" in
              "0 0 * * 1-5") TYPE="morning" ;;
              "0 5 * * 1-5") TYPE="afternoon" ;;
              "0 10 * * 1-5") TYPE="evening" ;;
              "0 15 * * 1-5") TYPE="night" ;;
            esac
          fi
          
          # Generate content based on type and random index
          INDEX=$((RANDOM % 6))
          TIMESTAMP=$(date -u +%Y-%m-%dT%H:%M:%S.000Z)
          
          # Morning greetings
          if [[ "$TYPE" == "morning" ]]; then
            case $INDEX in
              0) TITLE="ðŸŒ„ pagi woy, bangun dulu lahâ€”jangan jadi beban kasur ðŸ˜´"; DESC="yo morning fam! new day new grind, no capâ€”jangan afk mulu anying. bangun siang mah auto low rank fr ðŸ˜\\n> by server dev - <@399393175904714752>"; FOOTER="gas pelan tapi tahan lama" ;;
              1) TITLE="ðŸŒ… gas tipis, gausa ngegasâ€”pelan tapi jalan, anjayy"; DESC="rise up squad! fresh start, keep it steadyâ€”gerak dikit aja udah win. jangan jadi pajangan lobby, kocak ðŸ˜‚\\n> by server dev - <@399393175904714752>"; FOOTER="semangat tipis-tipis" ;;
              2) TITLE="ðŸ£ morning squad, kopi dulu baru bacot produktif â˜•"; DESC="gm legends! touch grass or touch goalsâ€”pilih satu dulu. pelanÂ² tapi konsisten, jangan banyak alasan anjir.\\n> by server dev - <@399393175904714752>"; FOOTER="santuy tapi kelar" ;;
              3) TITLE="ðŸŒ… push rank kehidupan dikit-dikit yaa, santai tapi nyicil âœ¨"; DESC="top of the morning, brodie! small dubs matterâ€”minum air, tarik napas, abis itu gas tipis. jangan typo hidup lu sendiri lah ðŸ˜´\\n> by server dev - <@399393175904714752>"; FOOTER="ggwp pagi" ;;
              4) TITLE="â˜€ï¸ rejeki ayam aja pagi, masa lu kalah sama ayam ðŸ“"; DESC="good morning gang! lowkey today feels winnableâ€”asal lu bukan npc parkir di base, cuk. kopi dulu terus jalan.\\n> by server dev - <@399393175904714752>"; FOOTER="the show keeps going" ;;
              5) TITLE="ðŸŒž selamat pagi, fokus ke 1 hal aja duluâ€”sisanya belakangan"; DESC="mornin' squad! no snooze, just movesâ€”bikin progress 1% juga udah mantap. jangan drama dulu, save buat nanti ðŸ¤\\n> by server dev - <@399393175904714752>"; FOOTER="gak tamat gak asik" ;;
            esac
            COLOR=16766720; THUMB="1f305"
          fi
          
          # Afternoon greetings
          if [[ "$TYPE" == "afternoon" ]]; then
            case $INDEX in
              0) TITLE="ðŸŒž siangÂ² gini, nap duluâ€”reset otak bentaran"; DESC="what's good squad? half the day cooked, lowkey saatnya refill energy. makan siang itu buff, bukan side quest anying ðŸ”\\n> by server dev - <@399393175904714752>"; FOOTER="santai sejenak" ;;
              1) TITLE="ðŸ” lunch dulu ga sih? perut ga bisa diajak nego"; DESC="yo fam! pace yourself, no burnoutâ€”isi perut dulu biar aim ga ngaco. jangan jadi singa di chat, koala di real life ðŸ˜´\\n> by server dev - <@399393175904714752>"; FOOTER="recharge dulu" ;;
              2) TITLE="ðŸŽ® break tipis, biar ga kebakar kaya cpu fan 100%"; DESC="good afternoon gamers! hydrate or diedrateâ€”minum dulu terus nap dikit, baru lanjut war. drama nanti aja kocak.\\n> by server dev - <@399393175904714752>"; FOOTER="makan dulu, boss!" ;;
              3) TITLE="âœ¨ tengah hari check: masih waras? hydrate dulu"; DESC="sup team! mid-day vibe checkâ€”kalau kepala panas, cooldown 10 menit. baliknya jangan salty, malu dong anjir ðŸ˜Œ\\n> by server dev - <@399393175904714752>"; FOOTER="stay chill" ;;
              4) TITLE="ðŸ˜Ž santai, lu bukan robotâ€”ga usah sok 24/7 on"; DESC="hey brodie! snack, stretch, scroll dikitâ€”yang penting baliknya fresh. jangan overcommit, nanti overtilt.\\n> by server dev - <@399393175904714752>"; FOOTER="stay hydrated" ;;
              5) TITLE="ðŸ’¡ ide liar biasanya muncul abis makanâ€”gas"; DESC="afternoon gang! \"makan, jangan makan temen.\" (Windut) â€” tapi kalo makan bareng sih hayuk ðŸ”¥\\n> by server dev - <@399393175904714752>"; FOOTER="weekend vibes" ;;
            esac
            COLOR=16763904; THUMB="2600"
          fi
          
          # Evening greetings
          if [[ "$TYPE" == "evening" ]]; then
            case $INDEX in
              0) TITLE="ðŸŒ† soreÂ², turunin rpmâ€”cooldown dulu lah"; DESC="good evening gamers! vibe check dulu, sunset hits differentâ€”santai bentar biar ga tilt, feeding itu dosa sosial anjir ðŸ˜‚\\n> by server dev - <@399393175904714752>"; FOOTER="chill vibes only" ;;
              1) TITLE="ðŸŒ… golden hour = izin buat log off pelanÂ²"; DESC="yo evening fam! log off pelanÂ², nyalain musik, mute drama. besok masih panjang, sekarang santai aja dulu anying.\\n> by server dev - <@399393175904714752>"; FOOTER="rest & recharge" ;;
              2) TITLE="â˜• ngopi senja? boleh. overthink? ntar aja"; DESC="evening squad! cooldown duluâ€”ganti playlist, cemil dikit, terus balik war. lose streak jangan sampe bikin uninstall kocak ðŸ¤¡\\n> by server dev - <@399393175904714752>"; FOOTER="malam ini milik kita" ;;
              3) TITLE="ðŸŒƒ jangan sok produktif 24/7, chill dulu kek"; DESC="what's poppin brodie! golden hour momentâ€”ketawain aja dikit, mmr turun ga sekejam kata netizen kok fr ðŸ˜Œ\\n> by server dev - <@399393175904714752>"; FOOTER="santai sejenak" ;;
              4) TITLE="âœ¨ bosen? ganti suasana 15 menit, balik war lagi"; DESC="good evening team! ganti map: dari kerja ke santai. snack dikit, chat dikit, hidup aman. slow is a strat fr.\\n> by server dev - <@399393175904714752>"; FOOTER="waktunya nge-game" ;;
              5) TITLE="ðŸŒ  cukupin buat hari ini, sisanya besok aja"; DESC="good evening gang! \"jangan panik, ini cuma game.\" (Windut) tapi kalo lose streak, off mic bentar gapapa ðŸ˜®â€ðŸ’¨\\n> by server dev - <@399393175904714752>"; FOOTER="ggwp" ;;
            esac
            COLOR=16744448; THUMB="1f307"
          fi
          
          # Night greetings
          if [[ "$TYPE" == "night" ]]; then
            case $INDEX in
              0) TITLE="ðŸŒ™ time to power downâ€”good night"; DESC="night night squad! log off, rechargeâ€”no heroics tonight. hp aja ada low battery warning anying âš¡ lu juga perlu tidur.\\n> by server dev - <@399393175904714752>"; FOOTER="tidur, cuy" ;;
              1) TITLE="ðŸ’¤ tidur dulu, biar besok ga error 500"; DESC="good night fam! save progress, close appâ€”bukan close friend. besok lanjut war dengan energi full, fr.\\n> by server dev - <@399393175904714752>"; FOOTER="recharge like a legend" ;;
              2) TITLE="âœ¨ bobo cantik, mimpi yang manis"; DESC="sleep tight gamers! jangan bawa rank ke mimpiâ€”biar hati ga kebakaran. bobo bentar aja udah beda, kocak.\\n> by server dev - <@399393175904714752>"; FOOTER="mimpi indah" ;;
              3) TITLE="ðŸš€ hari ini tamat. besok season baru"; DESC="gn team! \"tidur itu penting, gengs.\" (Windut) tahan dikit lawan fyp, tutup hp, tutup mata.\\n> by server dev - <@399393175904714752>"; FOOTER="rest well" ;;
              4) TITLE="ðŸ˜´ rest mode: ON. notif: OFF"; DESC="rest well brodie! yang belum kelar, besok hajar. sekarang waktunya jadi guling enjoyer, no cap.\\n> by server dev - <@399393175904714752>"; FOOTER="see u tomorrow" ;;
              5) TITLE="ðŸŒ™ malem ini buat recharge, bukan overthink"; DESC="good night gang! jangan flex begadangâ€”besok pagi malah jadi npc ngantuk, anjir ðŸ˜´\\n> by server dev - <@399393175904714752>"; FOOTER="digital detox" ;;
            esac
            COLOR=8947848; THUMB="1f319"
          fi
          
          # Send to Discord (single attempt, no retry loop)
          curl -f -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
               -H "Content-Type: application/json" \
               --connect-timeout 5 --max-time 10 \
               -d "{\"embeds\":[{\"title\":\"$TITLE\",\"description\":\"$DESC\",\"color\":$COLOR,\"thumbnail\":{\"url\":\"https://twemoji.maxcdn.com/v/latest/72x72/$THUMB.png\"},\"footer\":{\"text\":\"$FOOTER\",\"icon_url\":\"https://files.catbox.moe/npfh4e.jpg\"},\"timestamp\":\"$TIMESTAMP\"}]}"
          
          echo "âœ… Sent $TYPE greeting (index: $INDEX)"