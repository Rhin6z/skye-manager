name: daily discord greeting â€” bilingual (english-first)

on:
  schedule:
    # 07:00 WIB (00:00 UTC)
    - cron: '0 0 * * 1-5'
    # 12:00 WIB (05:00 UTC)
    - cron: '0 5 * * 1-5'
    # 17:00 WIB (10:00 UTC)
    - cron: '0 10 * * 1-5'
    # 22:00 WIB (15:00 UTC)
    - cron: '0 15 * * 1-5'

  workflow_dispatch:
    inputs:
      greeting_type:
        description: 'select greeting type'
        required: true
        default: 'morning'
        type: choice
        options:
          - morning
          - afternoon
          - evening
          - night

jobs:
  send-greeting:
    runs-on: ubuntu-latest
    steps:
      - name: send morning greeting
        if: github.event.schedule == '0 0 * * 1-5' || (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'morning')
        run: |
          TS="$(date -u +%Y-%m-%dT%H:%M:%S.000Z)"
          curl -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            -d @- <<JSON
          {
            "embeds": [{
              "title": "ðŸŒ… good morning, team",
              "description": "[yaaa, haloww chatt]\\n\\nset the tone: pick one tiny win to start. clean desk, clean mind, clean commit.\\n\\n> lezgoo â€” steady pace beats random rush. | by server dev <@399393175904714752>",
              "color": 16766720,
              "thumbnail": {"url": "https://cdn.discordapp.com/emojis/692428734822645770.gif"},
              "footer": {"text": "sip kopi, ship kode â˜•", "icon_url": "https://cdn.discordapp.com/emojis/692428869338931240.png"},
              "timestamp": "$TS"
            }]
          }
          JSON

      - name: send afternoon greeting
        if: github.event.schedule == '0 5 * * 1-5' || (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'afternoon')
        run: |
          TS="$(date -u +%Y-%m-%dT%H:%M:%S.000Z)"
          curl -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            -d @- <<JSON
          {
            "embeds": [{
              "title": "ðŸŒž midday boost",
              "description": "[udah lunch belum? minum dulu, gengs]\\n\\nlock in a 25-min focus, then breathe. one meaningful task > five busy tabs.\\n\\n> keep it rolling, pelan tapi nancep. | by server dev <@399393175904714752>",
              "color": 16763904,
              "thumbnail": {"url": "https://cdn.discordapp.com/emojis/692428734822645770.gif"},
              "footer": {"text": "hydrate, then iterate", "icon_url": "https://cdn.discordapp.com/emojis/692428869338931240.png"},
              "timestamp": "$TS"
            }]
          }
          JSON

      - name: send evening greeting
        if: github.event.schedule == '0 10 * * 1-5' || (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'evening')
        run: |
          TS="$(date -u +%Y-%m-%dT%H:%M:%S.000Z)"
          curl -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            -d @- <<JSON
          {
            "embeds": [{
              "title": "ðŸŒ† evening check-in",
              "description": "[selooww dulu] howâ€™s the day going? wrap one loose end so tomorrow starts lighter. note: done, pending, next.\\n\\n> you got this â€” lanjut tipis tipis. | by server dev <@399393175904714752>",
              "color": 16744448,
              "thumbnail": {"url": "https://cdn.discordapp.com/emojis/692428734822645770.gif"},
              "footer": {"text": "tidy desk, tidy brain", "icon_url": "https://cdn.discordapp.com/emojis/692428869338931240.png"},
              "timestamp": "$TS"
            }]
          }
          JSON

      - name: send night greeting
        if: github.event.schedule == '0 15 * * 1-5' || (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'night')
        run: |
          TS="$(date -u +%Y-%m-%dT%H:%M:%S.000Z)"
          curl -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            -d @- <<JSON
          {
            "embeds": [{
              "title": "ðŸŒ™ night wind down",
              "description": "[udah capek? wajar kok]\\n\\nunplug a bit: mute 2 noisiest notifs, breathe 4-4-4, jot 1 thing for tomorrow. sleep is meta.\\n\\n> good night â€” besok gas lagi, no drama. | by server dev <@399393175904714752>",
              "color": 8947848,
              "thumbnail": {"url": "https://cdn.discordapp.com/emojis/692428734822645770.gif"},
              "footer": {"text": "recharge mode: on", "icon_url": "https://cdn.discordapp.com/emojis/692428869338931240.png"},
              "timestamp": "$TS"
            }]
          }
          JSON