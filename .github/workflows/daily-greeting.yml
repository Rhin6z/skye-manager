name: daily discord greeting - rotating (english-first)

on:
  schedule:
    # 07:00 WIB (00:00 UTC) - weekdays
    - cron: '0 0 * * 1-5'
    # 12:00 WIB (05:00 UTC)
    - cron: '0 5 * * 1-5'
    # 17:00 WIB (10:00 UTC)
    - cron: '0 10 * * 1-5'
    # 22:00 WIB (15:00 UTC)
    - cron: '0 15 * * 1-5'

  workflow_dispatch:
    inputs:
      greeting_type:
        description: 'select greeting type'
        required: true
        default: 'morning'
        type: choice
        options:
          - morning
          - afternoon
          - evening
          - night

jobs:
  send-greeting:
    runs-on: ubuntu-latest
    steps:
      - name: send morning greeting (rotating)
        if: (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'morning') || github.event.schedule == '0 0 * * 1-5'
        run: |
          TIMESTAMP=$(date -u +%Y-%m-%dT%H:%M:%S.000Z)
          
          TITLES=(
            "🌅 good morning, gng"
            "🌅 morning check-in"
            "🌅 hey, welcome in"
          )
          
          DESCS=(
            "[heyyo geng, mari kita gas]\\n\\nlowkey warm-up: pick 1 tiny win to start today. beresin workspace kek, atau bikin kopi dulu gih.\\n\\n> gas tipis-tipis, small wins juga wins.\\n\\n> server dev - <@399393175904714752>"
            "[skuyy ngopi dulu gaes]\\n\\nngopi dulu, set goals, tarik napas. mau ngerjain apa nih hari ini bestie?\\n\\n> santuy tapi jalan terus ya.\\n\\n> server dev - <@399393175904714752>"
            "[whaddup squad, morning check]\\n\\nhari baru, semangat baru! share morning mood lu di chat dong.\\n\\n> pelan-pelan nga papa yang penting jalan.\\n\\n> server dev - <@399393175904714752>"
          )
          
          FOOTERS=(
            "warm start, clean slate"
            "sip kopi, ship kode"
            "light focus, strong flow"
          )
          
          INDEX=$((RANDOM % 3))
          
          cat > payload.json << EOF
          {
            "embeds": [{
              "title": "${TITLES[$INDEX]}",
              "description": "${DESCS[$INDEX]}",
              "color": 16766720,
              "thumbnail": {
                "url": "https://cdn.discordapp.com/attachments/1365248252009644053/1407333123791786077/logo_anim.gif?ex=68a5b89b&is=68a4671b&hm=2bc283716f14281f2518ac14003d41ca9fd58200a446e21a7682d2cdb6b4f38b"
              },
              "footer": {
                "text": "${FOOTERS[$INDEX]}",
                "icon_url": "https://files.catbox.moe/npfh4e.jpg"
              },
              "timestamp": "$TIMESTAMP"
            }]
          }
          EOF
          
          curl -sS -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            --data @payload.json

      - name: send afternoon greeting (rotating)
        if: (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'afternoon') || github.event.schedule == '0 5 * * 1-5'
        run: |
          TIMESTAMP=$(date -u +%Y-%m-%dT%H:%M:%S.000Z)
          
          TITLES=(
            "🌞 midday boost"
            "🌞 afternoon check-in"
            "🌞 keep the pace"
            "🌞 lunch & launch"
          )
          
          DESCS=(
            "[dah makan belom nih? jangan telat makan ya]\\n\\nfokus 25 menit dulu, terus break bentar. progress dikit > scroll tiktok mulu.\\n\\n> santuy tapi jalan terus bestie.\\n\\n> server dev - <@399393175904714752>"
            "[yo waddup, masih semangat kan?]\\n\\nmau achieve apa sebelum break? share di chat - kita support bareng yak.\\n\\n> slow but sure, gang!\\n\\n> server dev - <@399393175904714752>"
            "[gas dikit lagi gaes]\\n\\nstretch dulu, isi botol, push update dikit - konsisten > sempurna.\\n\\n> jangan lupa istirahat ya bestie.\\n\\n> server dev - <@399393175904714752>"
            "[skuy power hour dulu]\\n\\nstop doomscroll, gas commit kecil atau task ringan. pasti bisa kok!\\n\\n> yang penting jalan terus gaes.\\n\\n> server dev - <@399393175904714752>"
          )
          
          FOOTERS=(
            "hydrate, then iterate"
            "focus beats frenzy"
            "move kind, move forward"
            "snack, stack, ship"
          )
          
          INDEX=$((RANDOM % 4))
          
          cat > payload.json << EOF
          {
            "embeds": [{
              "title": "${TITLES[$INDEX]}",
              "description": "${DESCS[$INDEX]}",
              "color": 16763904,
              "thumbnail": {
                "url": "https://cdn.discordapp.com/attachments/1365248252009644053/1407333123791786077/logo_anim.gif?ex=68a5b89b&is=68a4671b&hm=2bc283716f14281f2518ac14003d41ca9fd58200a446e21a7682d2cdb6b4f38b"
              },
              "footer": {
                "text": "${FOOTERS[$INDEX]}",
                "icon_url": "https://files.catbox.moe/npfh4e.jpg"
              },
              "timestamp": "$TIMESTAMP"
            }]
          }
          EOF
          
          curl -sS -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            --data @payload.json

      - name: send evening greeting (rotating)
        if: (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'evening') || github.event.schedule == '0 10 * * 1-5'
        run: |
          TIMESTAMP=$(date -u +%Y-%m-%dT%H:%M:%S.000Z)
          
          TITLES=(
            "🌆 evening check-in"
            "🌆 golden hour hello"
            "🌆 wrap-up together"
            "🌆 sunset sync"
          )
          
          DESCS=(
            "[gimana hari ini bestie? share dong]\\n\\nberesin kerjaan dikit biar besok fresh - list dulu: done, pending, next move.\\n\\n> proud of you sih, fr fr.\\n\\n> server dev - <@399393175904714752>"
            "[time to slow down gaes]\\n\\nshare highlight hari ini dong - kecil gede gapapa, we celebrate everything here.\\n\\n> udah cukup kok hari ini, istirahat gih.\\n\\n> server dev - <@399393175904714752>"
            "[halo squad, gas closing strong]\\n\\ntutup tab, notes buat besok, logout dengan tenang.\\n\\n> gaskeun pelan-pelan aja.\\n\\n> server dev - <@399393175904714752>"
            "[golden hour check yok]\\n\\nkalo mager, at least beresin meja 2 menit - reset mini, vibe maksimal.\\n\\n> besok pasti berterimakasih kok.\\n\\n> server dev - <@399393175904714752>"
          )
          
          FOOTERS=(
            "reflect, then reset"
            "gratitude > grind"
            "light close, easy start"
            "sunset on, stress off"
          )
          
          INDEX=$((RANDOM % 4))
          
          cat > payload.json << EOF
          {
            "embeds": [{
              "title": "${TITLES[$INDEX]}",
              "description": "${DESCS[$INDEX]}",
              "color": 16744448,
              "thumbnail": {
                "url": "https://cdn.discordapp.com/attachments/1365248252009644053/1407333123791786077/logo_anim.gif?ex=68a5b89b&is=68a4671b&hm=2bc283716f14281f2518ac14003d41ca9fd58200a446e21a7682d2cdb6b4f38b"
              },
              "footer": {
                "text": "${FOOTERS[$INDEX]}",
                "icon_url": "https://files.catbox.moe/npfh4e.jpg"
              },
              "timestamp": "$TIMESTAMP"
            }]
          }
          EOF
          
          curl -sS -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            --data @payload.json

      - name: send night greeting (rotating)
        if: (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'night') || github.event.schedule == '0 15 * * 1-5'
        run: |
          TIMESTAMP=$(date -u +%Y-%m-%dT%H:%M:%S.000Z)
          
          TITLES=(
            "🌙 night wind down"
            "🌙 good night, gng"
            "🌙 lights low, hearts full"
            "🌙 bedtime ping"
          )
          
          DESCS=(
            "[waktunya cooling down bestie]\\n\\nmute notif yang berisik, tarik napas 4-4-4, tulis satu hal yang bikin happy hari ini.\\n\\n> istirahat itu wajib, gada nego.\\n\\n> server dev - <@399393175904714752>"
            "[yok waktunya tidur gaes]\\n\\nunplug bentar - lamp dim, pikiran clear. besok gas lagi, no drama no rusuh.\\n\\n> bobo yang nyenyak ya bestie.\\n\\n> server dev - <@399393175904714752>"
            "[makasih effort hari ini squad]\\n\\nshare mini win di chat, trus tidur dengan damai. sisanya besok aja - fr fr.\\n\\n> good night fam, rest well.\\n\\n> server dev - <@399393175904714752>"
            "[last call sebelum bobo gaes]\\n\\ncuci muka, minum air putih, airplane mode kalo perlu - then bobo time.\\n\\n> recharge mode: on gaes.\\n\\n> server dev - <@399393175904714752>"
          )
          
          FOOTERS=(
            "recharge mode: on"
            "sleep easy, wake ready"
            "see u tomorrow"
            "dream well, ship well"
          )
          
          INDEX=$((RANDOM % 4))
          
          cat > payload.json << EOF
          {
            "embeds": [{
              "title": "${TITLES[$INDEX]}",
              "description": "${DESCS[$INDEX]}",
              "color": 8947848,
              "thumbnail": {
                "url": "https://cdn.discordapp.com/attachments/1365248252009644053/1407333123791786077/logo_anim.gif?ex=68a5b89b&is=68a4671b&hm=2bc283716f14281f2518ac14003d41ca9fd58200a446e21a7682d2cdb6b4f38b"
              },
              "footer": {
                "text": "${FOOTERS[$INDEX]}",
                "icon_url": "https://files.catbox.moe/npfh4e.jpg"
              },
              "timestamp": "$TIMESTAMP"
            }]
          }
          EOF
          
          curl -sS -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            --data @payload.json