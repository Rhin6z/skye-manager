name: Daily Discord Greeting

on:
  schedule:
    # 07:00 WIB (00:00 UTC)
    - cron: '0 0 * * 1-5'
    # 12:00 WIB (05:00 UTC)
    - cron: '0 5 * * 1-5'
    # 17:00 WIB (10:00 UTC)
    - cron: '0 10 * * 1-5'
    # 22:00 WIB (15:00 UTC)
    - cron: '0 15 * * 1-5'

  workflow_dispatch:
    inputs:
      greeting_type:
        description: 'Select greeting type'
        required: true
        default: 'morning'
        type: choice
        options:
          - morning
          - afternoon
          - evening
          - night

jobs:
  send-greeting:
    runs-on: ubuntu-latest
    steps:
      - name: Send Morning Greeting
        if: github.event.schedule == '0 0 * * 1-5' || (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'morning')
        run: |
          TS="$(date -u +%Y-%m-%dT%H:%M:%S.000Z)"
          curl -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            -d @- <<JSON
          {
            "embeds": [{
              "title": "ðŸŒ… Good Morning Everyone!",
              "description": "**Rise and shine!**\\n\\nStart your day with intention. One focused hour > ten busy ones.\\n\\n> Have a productive day! | by server dev <@399393175904714752>",
              "color": 16766720,
              "thumbnail": {"url": "https://cdn.discordapp.com/emojis/692428734822645770.gif"},
              "footer": {"text": "Small steps. Big wins.", "icon_url": "https://cdn.discordapp.com/emojis/692428869338931240.png"},
              "timestamp": "$TS"
            }]
          }
          JSON

      - name: Send Afternoon Greeting
        if: github.event.schedule == '0 5 * * 1-5' || (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'afternoon')
        run: |
          TS="$(date -u +%Y-%m-%dT%H:%M:%S.000Z)"
          curl -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            -d @- <<JSON
          {
            "embeds": [{
              "title": "ðŸŒž Midday Boost",
              "description": "**Halfway there.**\\n\\nStretch, hydrate, then land one meaningful task before you break.\\n\\n> Keep it moving! | by server dev <@399393175904714752>",
              "color": 16763904,
              "thumbnail": {"url": "https://cdn.discordapp.com/emojis/692428734822645770.gif"},
              "footer": {"text": "Fuel your body, fuel your brain.", "icon_url": "https://cdn.discordapp.com/emojis/692428869338931240.png"},
              "timestamp": "$TS"
            }]
          }
          JSON

      - name: Send Evening Greeting
        if: github.event.schedule == '0 10 * * 1-5' || (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'evening')
        run: |
          TS="$(date -u +%Y-%m-%dT%H:%M:%S.000Z)"
          curl -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            -d @- <<JSON
          {
            "embeds": [{
              "title": "ðŸŒ† Evening Check-in",
              "description": "**Howâ€™s your day going?**\\n\\nWrap one loose end so tomorrow starts cleaner.\\n\\n> Youâ€™re doing great. | by server dev <@399393175904714752>",
              "color": 16744448,
              "thumbnail": {"url": "https://cdn.discordapp.com/emojis/692428734822645770.gif"},
              "footer": {"text": "Reflect, plan, and keep moving.", "icon_url": "https://cdn.discordapp.com/emojis/692428869338931240.png"},
              "timestamp": "$TS"
            }]
          }
          JSON

      - name: Send Night Greeting
        if: github.event.schedule == '0 15 * * 1-5' || (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'night')
        run: |
          TS="$(date -u +%Y-%m-%dT%H:%M:%S.000Z)"
          curl -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            -d @- <<JSON
          {
            "embeds": [{
              "title": "ðŸŒ™ Night Wind Down",
              "description": "**You made it through the day.**\\n\\nTime to unplug, breathe, and reset. Sleep well so tomorrow hits different.\\n\\n> Rest well, team. See you tomorrow. | by server dev <@399393175904714752>",
              "color": 8947848,
              "thumbnail": {"url": "https://cdn.discordapp.com/emojis/692428734822645770.gif"},
              "footer": {"text": "Rest well, recharge, repeat âœ¨", "icon_url": "https://cdn.discordapp.com/emojis/692428869338931240.png"},
              "timestamp": "$TS"
            }]
          }
          JSON
