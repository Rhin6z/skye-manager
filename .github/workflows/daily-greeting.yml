name: daily discord greeting - rotating (english-first)

on:
  schedule:
    # 07:00 WIB (00:00 UTC) - weekdays
    - cron: '0 0 * * 1-5'
    # 12:00 WIB (05:00 UTC)
    - cron: '0 5 * * 1-5'
    # 17:00 WIB (10:00 UTC)
    - cron: '0 10 * * 1-5'
    # 22:00 WIB (15:00 UTC)
    - cron: '0 15 * * 1-5'

  workflow_dispatch:
    inputs:
      greeting_type:
        description: 'select greeting type'
        required: true
        default: 'morning'
        type: choice
        options:
          - morning
          - afternoon
          - evening
          - night

jobs:
  send-greeting:
    runs-on: ubuntu-latest
    steps:
      - name: send morning greeting (rotating)
        if: (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'morning') || github.event.schedule == '0 0 * * 1-5'
        run: |
          TIMESTAMP=$(date -u +%Y-%m-%dT%H:%M:%S.000Z)
          
          TITLES=(
            "🌅 good morning, gng"
            "🌅 morning check-in"
            "🌅 hey, welcome in"
          )
          
          DESCS=(
            "[haloww chatt]\\n\\nlowkey warm-up: pick 1 tiny win to start today. maybe clean your workspace or prep that coffee ritual.\\n\\n> lezgoo, small steps lead to big wins.\\n\\n> server dev - <@399393175904714752>"
            "[pagiii gng]\\n\\nsip coffee, set intention, breathe deep. what's one thing you wanna ship today?\\n\\n> small steps, steady progress.\\n\\n> server dev - <@399393175904714752>"
            "[yaa, morning fam]\\n\\nnew day, new reps, fresh energy. drop your morning vibe in chat!\\n\\n> steady momentum beats rushed chaos.\\n\\n> server dev - <@399393175904714752>"
          )
          
          FOOTERS=(
            "warm start, clean slate"
            "sip kopi, ship kode"
            "light focus, strong flow"
          )
          
          INDEX=$((RANDOM % 3))
          
          cat > payload.json << EOF
          {
            "embeds": [{
              "title": "${TITLES[$INDEX]}",
              "description": "${DESCS[$INDEX]}",
              "color": 16766720,
              "thumbnail": {
                "url": "https://cdn.discordapp.com/attachments/1365248252009644053/1407333123791786077/logo_anim.gif?ex=68a5b89b&is=68a4671b&hm=2bc283716f14281f2518ac14003d41ca9fd58200a446e21a7682d2cdb6b4f38b"
              },
              "footer": {
                "text": "${FOOTERS[$INDEX]}",
                "icon_url": "https://cdn.discordapp.com/emojis/692428869338931240.png"
              },
              "timestamp": "$TIMESTAMP"
            }]
          }
          EOF
          
          curl -sS -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            --data @payload.json

      - name: send afternoon greeting (rotating)
        if: (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'afternoon') || github.event.schedule == '0 5 * * 1-5'
        run: |
          TIMESTAMP=$(date -u +%Y-%m-%dT%H:%M:%S.000Z)
          
          TITLES=(
            "🌞 midday boost"
            "🌞 afternoon check-in"
            "🌞 keep the pace"
            "🌞 lunch & launch"
          )
          
          DESCS=(
            "[udah lunch? minum dulu, gng]\\n\\nlock 25-min focus, then breathe deep. satu progress bermakna > lima tab random browsing.\\n\\n> keep it rolling, pelan tapi nancep di hati.\\n\\n> server dev - <@399393175904714752>"
            "[halo halo, siang dulu nih]\\n\\nwhat's your one thing before break? drop it di chat - kita dorong bareng, support each other.\\n\\n> less noise, more meaningful signal.\\n\\n> server dev - <@399393175904714752>"
            "[lanjut tipis tipis ya]\\n\\nstretch those muscles, refill water bottle, ship a tiny update - consistency is king.\\n\\n> progress over perfection, always.\\n\\n> server dev - <@399393175904714752>"
            "[ayo ayo, power hour dikit]\\n\\nno doomscroll, just one clean commit or small task done. bet you can do it!\\n\\n> ship small, ship often, ship with love.\\n\\n> server dev - <@399393175904714752>"
          )
          
          FOOTERS=(
            "hydrate, then iterate"
            "focus beats frenzy"
            "move kind, move forward"
            "snack, stack, ship"
          )
          
          INDEX=$((RANDOM % 4))
          
          cat > payload.json << EOF
          {
            "embeds": [{
              "title": "${TITLES[$INDEX]}",
              "description": "${DESCS[$INDEX]}",
              "color": 16763904,
              "thumbnail": {
                "url": "https://cdn.discordapp.com/attachments/1365248252009644053/1407333123791786077/logo_anim.gif?ex=68a5b89b&is=68a4671b&hm=2bc283716f14281f2518ac14003d41ca9fd58200a446e21a7682d2cdb6b4f38b"
              },
              "footer": {
                "text": "${FOOTERS[$INDEX]}",
                "icon_url": "https://cdn.discordapp.com/emojis/692428869338931240.png"
              },
              "timestamp": "$TIMESTAMP"
            }]
          }
          EOF
          
          curl -sS -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            --data @payload.json

      - name: send evening greeting (rotating)
        if: (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'evening') || github.event.schedule == '0 10 * * 1-5'
        run: |
          TIMESTAMP=$(date -u +%Y-%m-%dT%H:%M:%S.000Z)
          
          TITLES=(
            "🌆 evening check-in"
            "🌆 golden hour hello"
            "🌆 wrap-up together"
            "🌆 sunset sync"
          )
          
          DESCS=(
            "[gimana harinya? cerita dikit yuk]\\n\\nwrap one loose end biar besok startnya ringan - categorize: done, pending, next action.\\n\\n> proud of you, keep going strong.\\n\\n> server dev - <@399393175904714752>"
            "[selow dulu, tarik napas dalam]\\n\\nshare your best moment today - besar/kecil gapapa, we celebrate all wins here.\\n\\n> you did enough today, for real.\\n\\n> server dev - <@399393175904714752>"
            "[halo tim, finish strong bareng]\\n\\nclose one tab, jot one note for tomorrow, log off with peace of mind.\\n\\n> you're allowed to slow down, it's okay.\\n\\n> server dev - <@399393175904714752>"
            "[golden hour check-in time]\\n\\nif mager, at least tidy desk 2 menit - tiny reset, big positive vibe shift.\\n\\n> tomorrow you will definitely thank you.\\n\\n> server dev - <@399393175904714752>"
          )
          
          FOOTERS=(
            "reflect, then reset"
            "gratitude > grind"
            "light close, easy start"
            "sunset on, stress off"
          )
          
          INDEX=$((RANDOM % 4))
          
          cat > payload.json << EOF
          {
            "embeds": [{
              "title": "${TITLES[$INDEX]}",
              "description": "${DESCS[$INDEX]}",
              "color": 16744448,
              "thumbnail": {
                "url": "https://cdn.discordapp.com/attachments/1365248252009644053/1407333123791786077/logo_anim.gif?ex=68a5b89b&is=68a4671b&hm=2bc283716f14281f2518ac14003d41ca9fd58200a446e21a7682d2cdb6b4f38b"
              },
              "footer": {
                "text": "${FOOTERS[$INDEX]}",
                "icon_url": "https://cdn.discordapp.com/emojis/692428869338931240.png"
              },
              "timestamp": "$TIMESTAMP"
            }]
          }
          EOF
          
          curl -sS -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            --data @payload.json

      - name: send night greeting (rotating)
        if: (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'night') || github.event.schedule == '0 15 * * 1-5'
        run: |
          TIMESTAMP=$(date -u +%Y-%m-%dT%H:%M:%S.000Z)
          
          TITLES=(
            "🌙 night wind down"
            "🌙 good night, gng"
            "🌙 lights low, hearts full"
            "🌙 bedtime ping"
          )
          
          DESCS=(
            "[malam semua - good job today]\\n\\nmute 2 notifs paling berisik, breathe 4-4-4, tulis satu hal yang bikin kamu senyum hari ini.\\n\\n> rest is part of the plan, good night.\\n\\n> server dev - <@399393175904714752>"
            "[yaa, waktunya cooldown]\\n\\nunplug a bit - lamp dim, mind calm. besok gas lagi, no rush no drama, santai aja.\\n\\n> sleep easy, gng. sweet dreams.\\n\\n> server dev - <@399393175904714752>"
            "[thank you for today's effort]\\n\\ndrop one tiny win di chat, lalu tutup layar with gratitude. sisanya besok - no cap.\\n\\n> good night, fam. rest well.\\n\\n> server dev - <@399393175904714752>"
            "[last call before good night]\\n\\nwash face, water sip, airplane mode if needed - then lights off, mind off.\\n\\n> recharge mode: officially activated.\\n\\n> server dev - <@399393175904714752>"
          )
          
          FOOTERS=(
            "recharge mode: on"
            "sleep easy, wake ready"
            "see u tomorrow"
            "dream well, ship well"
          )
          
          INDEX=$((RANDOM % 4))
          
          cat > payload.json << EOF
          {
            "embeds": [{
              "title": "${TITLES[$INDEX]}",
              "description": "${DESCS[$INDEX]}",
              "color": 8947848,
              "thumbnail": {
                "url": "https://cdn.discordapp.com/attachments/1365248252009644053/1407333123791786077/logo_anim.gif?ex=68a5b89b&is=68a4671b&hm=2bc283716f14281f2518ac14003d41ca9fd58200a446e21a7682d2cdb6b4f38b"
              },
              "footer": {
                "text": "${FOOTERS[$INDEX]}",
                "icon_url": "https://cdn.discordapp.com/emojis/692428869338931240.png"
              },
              "timestamp": "$TIMESTAMP"
            }]
          }
          EOF
          
          curl -sS -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            --data @payload.json