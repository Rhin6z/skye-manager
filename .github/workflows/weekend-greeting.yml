name: weekend discord greeting - rotating (english-first)

on:
  schedule:
    # 07:00 WIB (00:00 UTC) - weekends only
    - cron: '0 0 * * 6,0'
    # 12:00 WIB (05:00 UTC)
    - cron: '0 5 * * 6,0'
    # 17:00 WIB (10:00 UTC)
    - cron: '0 10 * * 6,0'
    # 22:00 WIB (15:00 UTC)
    - cron: '0 15 * * 6,0'

  workflow_dispatch:
    inputs:
      greeting_type:
        description: 'select greeting type (weekend)'
        required: true
        default: 'morning'
        type: choice
        options:
          - morning
          - afternoon
          - evening
          - night

jobs:
  send-greeting:
    runs-on: ubuntu-latest
    steps:
      - name: send morning greeting (rotating)
        if: (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'morning') || github.event.schedule == '0 0 * * 6,0'
        run: |
          TIMESTAMP=$(date -u +%Y-%m-%dT%H:%M:%S.000Z)
          
          TITLES=(
            "ğŸŒ… happy weekend, good morning"
            "ğŸŒ… saturday/sunday vibes"
            "ğŸŒ… weekend soft start"
          )
          
          DESCS=(
            "[bangun santuy aja bestie]\\n\\nberesin kamar 10 menit, stretching dikit, touch some grass. mau rebahan lagi juga gpp.\\n\\n> weekend vibes: activated.\\n\\n> server dev - <@399393175904714752>"
            "[gm squad, happy weekend!]\\n\\nplanning weekend: main + produktif dikit, perfectly balanced as all things should be.\\n\\n> jangan lupa self care ya gaes.\\n\\n> server dev - <@399393175904714752>"
            "[morning weekend warriors]\\n\\nshare plan dong: ngegame, netflix, atau full mager - semua valid kok.\\n\\n> do what makes your soul happy.\\n\\n> server dev - <@399393175904714752>"
          )
          
          FOOTERS=(
            "weekend pace: santuy tapi happy"
            "rest hard, play kind"
            "joy first, then the rest"
          )
          
          INDEX=$((RANDOM % 3))
          
          cat > payload.json << EOF
          {
            "embeds": [{
              "title": "${TITLES[$INDEX]}",
              "description": "${DESCS[$INDEX]}",
              "color": 16766720,
              "thumbnail": {
                "url": "https://cdn.discordapp.com/attachments/1365248252009644053/1407333123791786077/logo_anim.gif?ex=68a5b89b&is=68a4671b&hm=2bc283716f14281f2518ac14003d41ca9fd58200a446e21a7682d2cdb6b4f38b"
              },
              "footer": {
                "text": "${FOOTERS[$INDEX]}",
                "icon_url": "https://files.catbox.moe/npfh4e.jpg"
              },
              "timestamp": "$TIMESTAMP"
            }]
          }
          EOF
          
          curl -sS -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            --data @payload.json

      - name: send afternoon greeting (weekend, rotating)
        if: (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'afternoon') || github.event.schedule == '0 5 * * 6,0'
        run: |
          TIMESTAMP=$(date -u +%Y-%m-%dT%H:%M:%S.000Z)
          
          TITLES=(
            "ğŸŒ weekend midday"
            "ğŸŒ siang santuy"
            "ğŸŒ reset & play"
          )
          
          DESCS=(
            "[makan enak dulu gaes]\\n\\nwatch/read something that sparks joy 30 menit - invest in happiness dulu bestie.\\n\\n> charge that joy first, grind later.\\n\\n> server dev - <@399393175904714752>"
            "[yok break time squad]\\n\\nno doom scrolling ya! touch grass 10 menit atau telpon temen catch up.\\n\\n> human connection > endless hustle fr fr.\\n\\n> server dev - <@399393175904714752>"
            "[santuy time activated]\\n\\nkasih rekomendasi lagu di chat dong, biar weekend makin chill.\\n\\n> musik enak = mood boost instant.\\n\\n> server dev - <@399393175904714752>"
          )
          
          FOOTERS=(
            "vitamin d + playlist favorit"
            "be present, be kind"
            "good tunes, good mood"
          )
          
          INDEX=$((RANDOM % 3))
          
          cat > payload.json << EOF
          {
            "embeds": [{
              "title": "${TITLES[$INDEX]}",
              "description": "${DESCS[$INDEX]}",
              "color": 16763904,
              "thumbnail": {
                "url": "https://cdn.discordapp.com/attachments/1365248252009644053/1407333123791786077/logo_anim.gif?ex=68a5b89b&is=68a4671b&hm=2bc283716f14281f2518ac14003d41ca9fd58200a446e21a7682d2cdb6b4f38b"
              },
              "footer": {
                "text": "${FOOTERS[$INDEX]}",
                "icon_url": "https://files.catbox.moe/npfh4e.jpg"
              },
              "timestamp": "$TIMESTAMP"
            }]
          }
          EOF
          
          curl -sS -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            --data @payload.json

      - name: send evening greeting (weekend, rotating)
        if: (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'evening') || github.event.schedule == '0 10 * * 6,0'
        run: |
          TIMESTAMP=$(date -u +%Y-%m-%dT%H:%M:%S.000Z)
          
          TITLES=(
            "ğŸŒ† golden hour vibes"
            "ğŸŒ† evening chitchat"
            "ğŸŒ† wrap-up lite"
          )
          
          DESCS=(
            "[sunset reveal dong gaes]\\n\\nkeluar 10 menit, touch some grass. kalo mager buka jendela aja gapapa.\\n\\n> slow down, nikmatin vibesnya.\\n\\n> server dev - <@399393175904714752>"
            "[sharing session yok, weekend edition]\\n\\ncerita highlight/lowlight hari ini - judgment free zone here bestie.\\n\\n> we got your back always.\\n\\n> server dev - <@399393175904714752>"
            "[weekend cleanup time!]\\n\\nclear notif atau close tab - small reset, big impact.\\n\\n> besok pasti berterimakasih kok.\\n\\n> server dev - <@399393175904714752>"
          )
          
          FOOTERS=(
            "sunset therapy, murah meriah"
            "safe space, safe pace"
            "light close, easy start"
          )
          
          INDEX=$((RANDOM % 3))
          
          cat > payload.json << EOF
          {
            "embeds": [{
              "title": "${TITLES[$INDEX]}",
              "description": "${DESCS[$INDEX]}",
              "color": 16744448,
              "thumbnail": {
                "url": "https://cdn.discordapp.com/attachments/1365248252009644053/1407333123791786077/logo_anim.gif?ex=68a5b89b&is=68a4671b&hm=2bc283716f14281f2518ac14003d41ca9fd58200a446e21a7682d2cdb6b4f38b"
              },
              "footer": {
                "text": "${FOOTERS[$INDEX]}",
                "icon_url": "https://files.catbox.moe/npfh4e.jpg"
              },
              "timestamp": "$TIMESTAMP"
            }]
          }
          EOF
          
          curl -sS -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            --data @payload.json

      - name: send night greeting (weekend, rotating)
        if: (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'night') || github.event.schedule == '0 15 * * 6,0'
        run: |
          TIMESTAMP=$(date -u +%Y-%m-%dT%H:%M:%S.000Z)
          
          TITLES=(
            "ğŸŒ™ weekend night reset"
            "ğŸŒ™ good night, gng"
            "ğŸŒ™ lights down"
          )
          
          DESCS=(
            "[scroll time boleh, tapi bobo first ya bestie]\\n\\nmandi air anget, pake baju nyaman, airplane mode buat digital detox.\\n\\n> tidur yang nyenyak gaes.\\n\\n> server dev - <@399393175904714752>"
            "[mari kita cooldown squad]\\n\\nunplug bentar, share win hari ini, trus bobo dengan damai.\\n\\n> sleep well no drama bestie.\\n\\n> server dev - <@399393175904714752>"
            "[time to rest gaes]\\n\\ntarik napas 3x, tulis gratitude, device down with peace.\\n\\n> see u tomorrow with better mood.\\n\\n> server dev - <@399393175904714752>"
          )
          
          FOOTERS=(
            "see u tomorrow, same vibe âœ¨"
            "dream well, team"
            "rest is meta"
          )
          
          INDEX=$((RANDOM % 3))
          
          cat > payload.json << EOF
          {
            "embeds": [{
              "title": "${TITLES[$INDEX]}",
              "description": "${DESCS[$INDEX]}",
              "color": 8947848,
              "thumbnail": {
                "url": "https://cdn.discordapp.com/attachments/1365248252009644053/1407333123791786077/logo_anim.gif?ex=68a5b89b&is=68a4671b&hm=2bc283716f14281f2518ac14003d41ca9fd58200a446e21a7682d2cdb6b4f38b"
              },
              "footer": {
                "text": "${FOOTERS[$INDEX]}",
                "icon_url": "https://files.catbox.moe/npfh4e.jpg"
              },
              "timestamp": "$TIMESTAMP"
            }]
          }
          EOF
          
          curl -sS -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            --data @payload.json