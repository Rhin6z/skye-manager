name: weekend discord greeting - rotating (english-first)

on:
  schedule:
    # 07:00 WIB (00:00 UTC) - weekends only
    - cron: '0 0 * * 6,0'
    # 12:00 WIB (05:00 UTC)
    - cron: '0 5 * * 6,0'
    # 17:00 WIB (10:00 UTC)
    - cron: '0 10 * * 6,0'
    # 22:00 WIB (15:00 UTC)
    - cron: '0 15 * * 6,0'

  workflow_dispatch:
    inputs:
      greeting_type:
        description: 'select greeting type (weekend)'
        required: true
        default: 'morning'
        type: choice
        options:
          - morning
          - afternoon
          - evening
          - night

jobs:
  send-greeting:
    runs-on: ubuntu-latest
    steps:
      - name: send morning greeting (rotating)
        if: (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'morning') || github.event.schedule == '0 0 * * 6,0'
        run: |
          TIMESTAMP=$(date -u +%Y-%m-%dT%H:%M:%S.000Z)
          
          TITLES=(
            "🌅 happy weekend, good morning"
            "🌅 saturday/sunday vibes"
            "🌅 weekend soft start"
          )
          
          DESCS=(
            "[bangun santai aja, gang]\\n\\n10-min tidy up, light stretch, let that sunlight hit your face. kalau mau tidur lagi juga gapapa.\\n\\n> soft start, strong positive mood.\\n\\n> server dev - <@399393175904714752>"
            "[gm gm, have a chill one]\\n\\nlowkey weekend plan: one fun thing + one tiny chore, balance is everything.\\n\\n> balance beats burnout, always.\\n\\n> server dev - <@399393175904714752>"
            "[pagiii, weekend crew assemble]\\n\\nshare your plan: main game, watch movie, or mager total - all options are valid.\\n\\n> do what fills your happiness bar.\\n\\n> server dev - <@399393175904714752>"
          )
          
          FOOTERS=(
            "weekend pace: santuy tapi happy"
            "rest hard, play kind"
            "joy first, then the rest"
          )
          
          INDEX=$((RANDOM % 3))
          
          cat > payload.json << EOF
          {
            "embeds": [{
              "title": "${TITLES[$INDEX]}",
              "description": "${DESCS[$INDEX]}",
              "color": 16766720,
              "thumbnail": {
                "url": "https://cdn.discordapp.com/attachments/1365248252009644053/1407333123791786077/logo_anim.gif?ex=68a5b89b&is=68a4671b&hm=2bc283716f14281f2518ac14003d41ca9fd58200a446e21a7682d2cdb6b4f38b"
              },
              "footer": {
                "text": "${FOOTERS[$INDEX]}",
                "icon_url": "https://cdn.discordapp.com/emojis/692428869338931240.png"
              },
              "timestamp": "$TIMESTAMP"
            }]
          }
          EOF
          
          curl -sS -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            --data @payload.json

      - name: send afternoon greeting (weekend, rotating)
        if: (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'afternoon') || github.event.schedule == '0 5 * * 6,0'
        run: |
          TIMESTAMP=$(date -u +%Y-%m-%dT%H:%M:%S.000Z)
          
          TITLES=(
            "🌞 weekend midday"
            "🌞 siang santuy"
            "🌞 reset & play"
          )
          
          DESCS=(
            "[makan enak dulu, baru lanjut seru2an]\\n\\nwatch/read something that sparks joy for 30 mins - invest in your happiness, for real.\\n\\n> charge that joy bar first, everything else second.\\n\\n> server dev - <@399393175904714752>"
            "[halo halo, break time dulu lah]\\n\\nno doomscroll allowed. go outside 10 mins or call a friend for quick catch up.\\n\\n> human connection > endless hustle.\\n\\n> server dev - <@399393175904714752>"
            "[lanjut santai aja, no pressure]\\n\\npost a song recommendation di chat, biar weekend vibes naik bareng-bareng.\\n\\n> good music is a universal buff.\\n\\n> server dev - <@399393175904714752>"
          )
          
          FOOTERS=(
            "vitamin d + playlist favorit"
            "be present, be kind"
            "good tunes, good mood"
          )
          
          INDEX=$((RANDOM % 3))
          
          cat > payload.json << EOF
          {
            "embeds": [{
              "title": "${TITLES[$INDEX]}",
              "description": "${DESCS[$INDEX]}",
              "color": 16763904,
              "thumbnail": {
                "url": "https://cdn.discordapp.com/attachments/1365248252009644053/1407333123791786077/logo_anim.gif?ex=68a5b89b&is=68a4671b&hm=2bc283716f14281f2518ac14003d41ca9fd58200a446e21a7682d2cdb6b4f38b"
              },
              "footer": {
                "text": "${FOOTERS[$INDEX]}",
                "icon_url": "https://cdn.discordapp.com/emojis/692428869338931240.png"
              },
              "timestamp": "$TIMESTAMP"
            }]
          }
          EOF
          
          curl -sS -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            --data @payload.json

      - name: send evening greeting (weekend, rotating)
        if: (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'evening') || github.event.schedule == '0 10 * * 6,0'
        run: |
          TIMESTAMP=$(date -u +%Y-%m-%dT%H:%M:%S.000Z)
          
          TITLES=(
            "🌆 golden hour vibes"
            "🌆 evening chitchat"
            "🌆 wrap-up lite"
          )
          
          DESCS=(
            "[foto langit dikit, kirim ke chat yuk]\\n\\nstep outside 10 mins for some fresh air. kalau mager, buka jendela wide juga jadi kok.\\n\\n> slow it down, nikmatin the moment fully.\\n\\n> server dev - <@399393175904714752>"
            "[ngobrol dikit yok, weekend vibes]\\n\\nshare your highlight/lowlight today - we listen with no judgment, safe space here.\\n\\n> we're in this together, always supporting.\\n\\n> server dev - <@399393175904714752>"
            "[weekend finishing move activated]\\n\\nclear 3 random notifs or close 1 tab - tiny weekend reset, big positive vibe shift.\\n\\n> tomorrow you will definitely thank you.\\n\\n> server dev - <@399393175904714752>"
          )
          
          FOOTERS=(
            "sunset therapy, murah meriah"
            "safe space, safe pace"
            "light close, easy start"
          )
          
          INDEX=$((RANDOM % 3))
          
          cat > payload.json << EOF
          {
            "embeds": [{
              "title": "${TITLES[$INDEX]}",
              "description": "${DESCS[$INDEX]}",
              "color": 16744448,
              "thumbnail": {
                "url": "https://cdn.discordapp.com/attachments/1365248252009644053/1407333123791786077/logo_anim.gif?ex=68a5b89b&is=68a4671b&hm=2bc283716f14281f2518ac14003d41ca9fd58200a446e21a7682d2cdb6b4f38b"
              },
              "footer": {
                "text": "${FOOTERS[$INDEX]}",
                "icon_url": "https://cdn.discordapp.com/emojis/692428869338931240.png"
              },
              "timestamp": "$TIMESTAMP"
            }]
          }
          EOF
          
          curl -sS -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            --data @payload.json

      - name: send night greeting (weekend, rotating)
        if: (github.event_name == 'workflow_dispatch' && github.event.inputs.greeting_type == 'night') || github.event.schedule == '0 15 * * 6,0'
        run: |
          TIMESTAMP=$(date -u +%Y-%m-%dT%H:%M:%S.000Z)
          
          TITLES=(
            "🌙 weekend night reset"
            "🌙 good night, gng"
            "🌙 lights down"
          )
          
          DESCS=(
            "[weekend scroll time boleh, tapi tidur tetep nomor satu]\\n\\nhot shower, comfy clothes, airplane mode kalau perlu untuk digital detox.\\n\\n> good night - rest well, ship well tomorrow.\\n\\n> server dev - <@399393175904714752>"
            "[yaa, weekend cooldown phase]\\n\\nunplug a bit from everything, share 1 tiny win di chat, then lights off peacefully.\\n\\n> sleep easy, no weekend drama allowed.\\n\\n> server dev - <@399393175904714752>"
            "[lamp low, heart calm, mind at peace]\\n\\n3 deep breaths, write gratitude 1 line, put all devices down gently.\\n\\n> see u tomorrow, same positive vibe energy.\\n\\n> server dev - <@399393175904714752>"
          )
          
          FOOTERS=(
            "see u tomorrow, same vibe ✨"
            "dream well, team"
            "rest is meta"
          )
          
          INDEX=$((RANDOM % 3))
          
          cat > payload.json << EOF
          {
            "embeds": [{
              "title": "${TITLES[$INDEX]}",
              "description": "${DESCS[$INDEX]}",
              "color": 8947848,
              "thumbnail": {
                "url": "https://cdn.discordapp.com/attachments/1365248252009644053/1407333123791786077/logo_anim.gif?ex=68a5b89b&is=68a4671b&hm=2bc283716f14281f2518ac14003d41ca9fd58200a446e21a7682d2cdb6b4f38b"
              },
              "footer": {
                "text": "${FOOTERS[$INDEX]}",
                "icon_url": "https://cdn.discordapp.com/emojis/692428869338931240.png"
              },
              "timestamp": "$TIMESTAMP"
            }]
          }
          EOF
          
          curl -sS -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            --data @payload.json