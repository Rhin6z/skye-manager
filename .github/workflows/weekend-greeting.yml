name: weekend discord greeting

on:
  schedule:
    - cron: '0 0 * * 6,0'
    - cron: '0 5 * * 6,0'
    - cron: '0 10 * * 6,0'
    - cron: '0 15 * * 6,0'
  workflow_dispatch:
    inputs:
      greeting_type:
        description: 'select greeting type (weekend)'
        required: true
        default: 'morning'
        type: choice
        options: [morning, afternoon, evening, night]

jobs:
  send-greeting:
    runs-on: ubuntu-latest
    timeout-minutes: 2
    
    steps:
      - name: Send Weekend Greeting
        run: |
          set -e
          
          # Determine greeting type
          if [[ "${{ github.event_name }}" == "workflow_dispatch" ]]; then
            TYPE="${{ github.event.inputs.greeting_type }}"
          else
            case "${{ github.event.schedule }}" in
              "0 0 * * 6,0") TYPE="morning" ;;
              "0 5 * * 6,0") TYPE="afternoon" ;;
              "0 10 * * 6,0") TYPE="evening" ;;
              "0 15 * * 6,0") TYPE="night" ;;
            esac
          fi
          
          # Generate content
          INDEX=$((RANDOM % 6))
          TIMESTAMP=$(date -u +%Y-%m-%dT%H:%M:%S.000Z)
          
          # Weekend morning greetings
          if [[ "$TYPE" == "morning" ]]; then
            case $INDEX in
              0) TITLE="ðŸŒ… weekend mode on â€” jangan buru-buru, rileks dulu"; DESC="yo weekend warriors! no alarms, no stress â€” rebahan is the endgame today. bangun siang? gapapa bro, asal jangan skip makan, anying ðŸ˜´\\n> by server dev - <@399393175904714752>"; FOOTER="weekend mode: ON" ;;
              1) TITLE="ðŸ›Œ alarm off, hidup on â€” santai woy"; DESC="good morning fam! lowkey today is for soft launch only â€” jalanin pelan, jangan jadi npc ngantuk doang kocak â˜•\\n> by server dev - <@399393175904714752>"; FOOTER="santuy, boss!" ;;
              2) TITLE="â˜€ï¸ pagi santuy, kopi santuy, vibe santuy"; DESC="gm squad! new day same chill â€” mandi opsional, sarapan wajib. jangan sok produktif, nanti kena karma monday fr ðŸ˜‚\\n> by server dev - <@399393175904714752>"; FOOTER="rebahan authorized" ;;
              3) TITLE="ðŸŽ® pagi weekend: login yang penting, bukan logika"; DESC="morning gang! touch grass or touch rank, pilih satu dulu. yang penting happy, bukan heboh, anjir ðŸŒ¿\\n> by server dev - <@399393175904714752>"; FOOTER="slow but happy" ;;
              4) TITLE="ðŸ˜´ rebahan is content â€” approved"; DESC="top of the morning brodie! weekend tuh patch khusus: buff ketawa, nerf drama. nikmatin aja dulu lah ðŸ˜Œ\\n> by server dev - <@399393175904714752>"; FOOTER="GG ez weekend" ;;
              5) TITLE="ðŸŒ„ slow morning, big vibe"; DESC="good morning legends! \"gak tamat gak asik!\" (Windut) â€” tapi tamatnya boleh tamat tidur siang juga sih ðŸ˜´\\n> by server dev - <@399393175904714752>"; FOOTER="no rush, just vibes" ;;
            esac
            COLOR=16766720; THUMB="1f305"
          fi
          
          # Weekend afternoon greetings
          if [[ "$TYPE" == "afternoon" ]]; then
            case $INDEX in
              0) TITLE="ðŸ” siang santai, perut kenyang, hati senang"; DESC="what's good squad! half the day cooked â€” refill energy dulu. makan siang itu buff utama, bukan side quest, anying ðŸ”\\n> by server dev - <@399393175904714752>"; FOOTER="santai sejenak" ;;
              1) TITLE="ðŸŒž weekend lunch buff â€” claim now"; DESC="yo fam! siang gini enaknya makan trus rebahan 15 menit â€” bukan koma 5 jam ya, kocak ðŸ˜´\\n> by server dev - <@399393175904714752>"; FOOTER="recharge dulu" ;;
              2) TITLE="ðŸ˜Ž half-day done, full-chill ahead"; DESC="good afternoon gamers! hydrate or diedrate â€” minum dulu, baru lanjut mabar. jangan salty garaÂ² lapar fr ðŸ¥¤\\n> by server dev - <@399393175904714752>"; FOOTER="makan dulu, boss!" ;;
              3) TITLE="ðŸŽ§ siangÂ² enaknya ngemil + nge-meme"; DESC="sup team! weekend tuh bukan kompetisi produktif â€” enjoy dulu, produktifnya ngelawak aja di vc ðŸ˜‚\\n> by server dev - <@399393175904714752>"; FOOTER="stay chill" ;;
              4) TITLE="ðŸ¥¤ hydrate dulu, gosip nanti"; DESC="hey brodie! kalau perut kosong, aim pasti goyang â€” isi dulu biar malem ga tepar, anjir\\n> by server dev - <@399393175904714752>"; FOOTER="stay hydrated" ;;
              5) TITLE="ðŸ›‹ï¸ post-lunch nap is meta"; DESC="afternoon gang! \"makan, jangan makan temen.\" (Windut) â€” tapi kalo makan bareng sih hayuk ðŸ”¥\\n> by server dev - <@399393175904714752>"; FOOTER="weekend vibes" ;;
            esac
            COLOR=16763904; THUMB="2600"
          fi
          
          # Weekend evening greetings
          if [[ "$TYPE" == "evening" ]]; then
            case $INDEX in
              0) TITLE="ðŸŒ† golden hour + good company = w"; DESC="good evening gamers! vibe check dulu â€” sunset hits different brodie. santai bentar biar ga tilt, feeding itu dosa sosial anjir ðŸ˜‚\\n> by server dev - <@399393175904714752>"; FOOTER="chill vibes only" ;;
              1) TITLE="ðŸŒ… sore santai, drama off"; DESC="yo evening fam! log off pelanÂ², nyalain musik, mute drama. weekend tuh untuk war yang fun, bukan debat kusir anying ðŸŽ§\\n> by server dev - <@399393175904714752>"; FOOTER="rest & recharge" ;;
              2) TITLE="ðŸŽ® evening queue: chill first, rank later"; DESC="evening squad! ganti playlist, cemil dikit, lanjut mabar. lose streak? break dulu 10 menit, jangan nekat uninstall kocak ðŸ¤¡\\n> by server dev - <@399393175904714752>"; FOOTER="malam ini milik kita" ;;
              3) TITLE="ðŸ¿ camilan siap, ketawa siap"; DESC="what's poppin gang! ketawa tipis, ngobrol receh â€” mmr turun ga sekejam komentar netizen kok fr ðŸ˜Œ\\n> by server dev - <@399393175904714752>"; FOOTER="santai sejenak" ;;
              4) TITLE="ðŸŽµ lagu enak, obrolan receh"; DESC="good evening team! \"jangan panik, ini cuma game.\" (Windut) â€” kalo lagi apes, jadi penonton lucu aja dulu ðŸ˜®â€ðŸ’¨\\n> by server dev - <@399393175904714752>"; FOOTER="waktunya nge-game" ;;
              5) TITLE="ðŸŒ  enjoy dulu, sisanya belakangan"; DESC="evening folks! jangan jadi hero sendirian, ajak temen â€” kalo kalah, kalah bareng lebih lucu, anying ðŸ˜‚\\n> by server dev - <@399393175904714752>"; FOOTER="ggwp" ;;
            esac
            COLOR=16744448; THUMB="1f307"
          fi
          
          # Weekend night greetings
          if [[ "$TYPE" == "night" ]]; then
            case $INDEX in
              0) TITLE="ðŸŒ™ night vibe: cozy + low noise"; DESC="night night squad! log off, recharge â€” no heroics tonight. hp aja ada low-battery warning anying âš¡ lu juga butuh tidur.\\n> by server dev - <@399393175904714752>"; FOOTER="tidur, cuy" ;;
              1) TITLE="ðŸ’¤ tidur boleh, begadang juga boleh (asal kuat)"; DESC="good night fam! save progress, close app â€” bukan close friend. besok lanjut war dengan energi full fr.\\n> by server dev - <@399393175904714752>"; FOOTER="recharge like a legend" ;;
              2) TITLE="âœ¨ bintang terang, kuota aman"; DESC="sleep tight gamers! jangan bawa rank ke mimpi â€” nanti mimpi dimarahin random, kocak ðŸ˜ª\\n> by server dev - <@399393175904714752>"; FOOTER="mimpi indah" ;;
              3) TITLE="ðŸš€ day complete â€” next episode tomorrow"; DESC="gn team! \"tidur itu penting, gengs.\" (Windut) â€” tahan dikit lawan fyp, tutup mata dulu baru scroll lagi besok.\\n> by server dev - <@399393175904714752>"; FOOTER="rest well" ;;
              4) TITLE="ðŸ˜´ rest mode on, fomo off"; DESC="rest well brodie! yang belum kelar, besok hajar. malem ini waktunya jadi guling enjoyer, no cap.\\n> by server dev - <@399393175904714752>"; FOOTER="see u tomorrow" ;;
              5) TITLE="ðŸŒœ lampu redup, hati adem"; DESC="good night gang! jangan flex begadang â€” besok malah jadi npc ngantuk, anjir ðŸ˜´\\n> by server dev - <@399393175904714752>"; FOOTER="digital detox" ;;
            esac
            COLOR=8947848; THUMB="1f319"
          fi
          
          # Send to Discord
          curl -f -X POST "${{ secrets.DISCORD_WEBHOOK_URL }}" \
               -H "Content-Type: application/json" \
               --connect-timeout 5 --max-time 10 \
               -d "{\"embeds\":[{\"title\":\"$TITLE\",\"description\":\"$DESC\",\"color\":$COLOR,\"thumbnail\":{\"url\":\"https://twemoji.maxcdn.com/v/latest/72x72/$THUMB.png\"},\"footer\":{\"text\":\"$FOOTER\",\"icon_url\":\"https://files.catbox.moe/npfh4e.jpg\"},\"timestamp\":\"$TIMESTAMP\"}]}"
          
          echo "âœ… Sent weekend $TYPE greeting (index: $INDEX)"